---
title: 3-5 PC Stream Test
sidebar_position: 5
---

# 3-5 Testing With Various Sources

After setup the environment of the **gst-plugins-bad-dev** project, you are ready to test the streaming sources.

## 1. Test Source

Basic test with video test source:

```bash
cd test_env
```

```bash
gst-launch-1.0 videotestsrc ! video/x-raw,width=1920,height=1080 ! videoconvert ! equirectangular ! videoconvert ! autovideosink
```

:::warning[Attention!]

Ensure the execution directory contains `EquimatX` and `EquimatY` files.

:::

## 2. MP4 File

To test with mp4 files, use the example below:

```bash
gst-launch-1.0 playbin uri=file:///path/to/video.mp4 video-sink="videoconvert ! equirectangular ! videoconvert ! autovideosink"
```

Try another example:

```bash
gst-launch-1.0 filesrc location=endo01.mp4 ! qtdemux ! queue ! avdec_h264 ! videoconvert ! equirectangular ! videoconvert ! autovideosink
```

Still image test:

```bash
gst-launch-1.0 filesrc location=image1920.jpg ! decodebin ! imagefreeze ! videoscale ! video/x-raw,width=1920,height=1080 ! videoconvert ! equirectangular ! videoconvert ! autovideosink
```

:::tip

- `gst-launch-1.0 playbin`: a high-level, automated pipeline setup
- `gst-launch-1.0 filesrc`: a low-level, fully customized pipeline

:::

## 3. Network Streaming

Now, we will test out network streaming. On the mini PC, run:

```bash
gst-launch-1.0 -v udpsrc uri=udp://127.0.0.1:5000 ! application/x-rtp, media=video, payload=96, encoding-name=H264 ! rtph264depay ! avdec_h264 ! videoconvert ! autovideosink
```

The mini PC will wait for an incoming stream. For the source, we will run the command below on the remote terminal in VS Code.

```bash
gst-launch-1.0 videotestsrc ! video/x-raw, width=1920, height=1080 ! videoconvert ! equirectangular ! videoconvert ! x264enc ! rtph264pay config-interval=10 ! udpsink host=127.0.0.1 port=5000
```

The output will be displayed on the mini PC.

## 4. USB Camera

First, connect a USB camera to mini PC and replace the source in the command as shown below:

```bash
gst-launch-1.0 v4l2src device=/dev/video0 ! videoscale ! video/x-raw, width=1920, height=1080 ! videoconvert ! equirectangular ! videoconvert ! x264enc ! rtph264pay config-interval=10 ! udpsink host=localhost port=5000
```

The camera output will be displayed.

:::tip[Video4Linux]

To install Video4Linux, run `sudo apt-get install v4l-utils`. A few useful commands include:

- `v4l2-ctl --list-devices`: list all camera devices
- `v4l2-ctl -d /dev/video0 -D`: display driver information
- `v4l2-ctl -d /dev/video0 --list-formats-ext`: display all supported image formats

:::

---

## References

- [Installing GStreamer](https://gstreamer.freedesktop.org/documentation/installing/index.html?gi-language=c)

- [Basic Tutorial 1: Hello world!](https://gstreamer.freedesktop.org/documentation/tutorials/basic/hello-world.html?gi-language=c)

- [`gst-launch-1.0`](https://gstreamer.freedesktop.org/documentation/tools/gst-launch.html?gi-language=c)

- [`gst-inspect-1.0`](https://gstreamer.freedesktop.org/documentation/tools/gst-inspect.html?gi-language=c#)

---