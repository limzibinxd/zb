---
title: 2-4 Setup Weston & Qt Display
sidebar_position: 5
---

# 2-4 Setup Weston & Qt User Interfaces using Yocto Project

**Weston** is a display server for Linux. Itâ€™s like the middleman between the hardware (like your screen) and the software (like the apps you use). Weston helps manage how things show up on the screen, making sure everything looks right.

**Qt** is a framework for building applications with a graphical user interface (GUI). It helps developers create apps with buttons, windows, and other interactive elements. Think of it like a toolbox for building apps that look and feel nice on your screen.

This tutorial will show you the steps to setup Weston and QT display using Yocto Project.

---

## Step 1: Initialise Build Environment for Yocto
Enter back into your container by using:

```bash
docker start rzg2l
docker exec -it rzg2l /bin/bash
```

Initialize a build using the `oe-init-build-env` script in Poky and set environment variable `TEMPLATECONF` to the below path.

```bash title="dir: ~/work/rzg2l/yocto"
TEMPLATECONF=$PWD/meta-renesas/meta-rzg2l/docs/template/conf/ 
```

```bash
source poky/oe-init-build-env build
```

Run the following commands to add necessary layers for AI application to build/conf/bblayers.conf (configration file for layers).

```bash
sudo apt install chrpath cpio diffstat gawk -y
```

```bash title="layer for graphics"
bitbake-layers add-layer ../meta-rz-features/meta-rz-graphics
```

```bash title="layer for codecs"
bitbake-layers add-layer ../meta-rz-features/meta-rz-codecs
```

## Step 2: Build Images

**For `Weston Image`** :  

Run the following command to build the weston image.
```bash title="dir: ~/work/rzg/yocto/build"
MACHINE=smarc-rzg2l bitbake core-image-weston
```
Run the following command to build cross compiler installer.
```bash title="dir: ~/work/rzg/yocto/build"
MACHINE=smarc-rzg2l bitbake core-image-weston -c populate_sdk
```  
  
**For `Qt Image`** :  

Run the following command to add the meta-qt5 layer for qt5.
```bash title="dir: ~/work/rzg/yocto/build"
bitbake-layers add-layer ../meta-qt5
```

and in local.conf file, add the following line.
```bash title="file: ~/work/rzg/yocto/build/conf/local.conf"
QT_DEMO = "1"
```

Run the following command to build the qt5 image.
```bash title="dir: ~/work/rzg/yocto/build"
MACHINE=smarc-rzg2l bitbake core-image-qt
```

Run the following command to build cross compiler installer.
```bash title="dir: ~/work/rzg/yocto/build"
MACHINE=smarc-rzg2l bitbake core-image-qt -c populate_sdk
```

## Step 3: Check Builded Image File
To check the image file,  
go to `~/work/rzg/yocto/build/tmp/deploy/images/smarc-rzg2l/`

:::info
image name | file name
--- | ---
core-image-weston | core-image-weston-smarc-rzg2l.wic.gz <br/> core-image-weston-smarc-rzg2l.wic.bmap
core-image-qt | core-image-qt-smarc-rzg2l.wic.gz <br/> core-image-qt-smarc-rzg2l.wic.bmap
:::