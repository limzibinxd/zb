---
title: 2-4 Prepare Packages & Patches 
sidebar_position: 4
---

# 2-4 Prepare Package & Patch files 

**Packages** for a microcontroller board are the physical shape and size of the chip. They determine how the microcontroller fits on a board and how it connects to other components.

**Patches** are updates or fixes to the microcontrollerâ€™s software or firmware. They improve performance, fix bugs, or add new features, much like updating an app on your phone.

This tutorial will show you what are the packages and patches needed for the RZ/G2L board.

---

## Step 1: Download Renesas Verified Linux Package
We need to download some zip files for the Yocto build. You can find the items to download in [RZ/G Verified Linux Package [5.10-CIP]](https://www.renesas.com/en/products/microcontrollers-microprocessors/rz-mpus/rzg-linux-platform/rzg-marketplace/verified-linux-package/rzg-verified-linux-package#Download)

These are the packages and patch files that you need to install:

**Packages**
- **[RTK0EF0045Z0021AZJ-v3.0.6-update3.zip](./packages/RTK0EF0045Z0021AZJ-v3.0.6-update3.zip)**
- **[RTK0EF0045Z13001ZJ-v1.2.2_EN.zip](./packages/RTK0EF0045Z13001ZJ-v1.2.2_EN.zip)**
- **[RTK0EF0045Z15001ZJ-v1.2.2_EN.zip](./packages/RTK0EF0045Z15001ZJ-v1.2.2_EN.zip)**

**Patch Files**
- **[0001-gstreamer-moil-plugin.patch](./packages/0001-gstreamer-moil-plugin.patch)**
- **[0002-fix_qtsmarthome_url.patch](./packages/0002-fix_qtsmarthome_url.patch)**

## Step 2: Copy the Downloaded packages
Enter the `rzg2l` Dev container, copy the zip files under `rzg2l` directory.  

:::warning
After downloading the packages, please remember to remove the hash appended to the file name to prevent any errors!
:::

Unzip the `.zip` files.

```bash
unzip RTK0EF0045Z0021AZJ-v3.0.6-update3.zip
```

```bash
unzip RTK0EF0045Z13001ZJ-v1.2.2_EN.zip
```

```bash
unzip RTK0EF0045Z15001ZJ-v1.2.2_EN.zip
```

## Step 3: Extract the Unzipped files
Create a new directory in your Dev Container and enter it.

```bash
mkdir yocto
cd yocto
```

Extract the `.tar.gz` files.

```bash
tar zxvf ../RTK0EF0045Z0021AZJ-v3.0.6-update3/rzg_vlp_v3.0.6.tar.gz
```

```bash
tar zxvf ../RTK0EF0045Z13001ZJ-v1.2.2_EN/meta-rz-features_graphics_v1.2.2.tar.gz
```

```bash
tar zxvf ../RTK0EF0045Z15001ZJ-v1.2.2_EN/meta-rz-features_codec_v1.2.2.tar.gz
```

List out the files in the working directory to verify the package contents.

```bash
ls -l
```

If the output is as follows, the packages are installed correctly.
```
extra  
meta-gplv2   
meta-openembedded  
meta-qt5  
meta-renesas  
meta-rz-features  
meta-virtualization  
poky
```

## Step 4: Apply Patch files
Apply a patch file to update `vlp` to `update3`.

```bash
sudo apt-get install patch
```

```bash
patch -p1 < ../RTK0EF0045Z0021AZJ-v3.0.6-update3/vlpg306-to-vlpg306update3.patch
```

Move to the `meta-renesas` directory, apply patch file extras.

```bash
cd meta-renesas
```

```bash
patch -p1 < ../extra/0001-rz-common-recipes-debian-buster-glibc-update-to-v2.2.patch
```

```bash
patch -p1 < ../extra/0001-rz-common-linux-update-linux-kernel-to-the-latest-re.patch
```

```bash
patch -p1 < ../extra/0001-rz-common-gst-plugins-bad-Depending-bayer2raw-if-lay.patch
```

Move back the working directory `yocto`.

```bash
cd ..
```

:::warning
Please move the two patch files **0001-gstreamer-moil-plugin.patch** and **0002-fix_qtsmarthome_url.patch** into the `yocto` directory before applying the patch commands below.
:::


```bash title="Apply a patch file to add the GStreamer Moil Plugin."
patch -p1 < 0001-gstreamer-moil-plugin.patch
```

```bash title="Apply a patch file to fix the Qt Smart Home URL."
patch -p1 < 0002-fix_qtsmarthome_url.patch
```

---

## References
- [Docker Container setup for building a Linux BSP for RZ](https://github.com/renesas-rz/docker_setup)

---