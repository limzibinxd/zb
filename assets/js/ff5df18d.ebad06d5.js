"use strict";(self.webpackChunkmy_tutorial=self.webpackChunkmy_tutorial||[]).push([[2891],{4362:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>A,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"week2/2-6","title":"2-6 Create Yocto Layer and Recipe","description":"Introduction","source":"@site/docs/week2/2-6.md","sourceDirName":"week2","slug":"/week2/2-6","permalink":"/zb/docs/week2/2-6","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/week2/2-6.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"2-6 Create Yocto Layer and Recipe","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"2-5 Boot Up RZ/G2L with SD card","permalink":"/zb/docs/week2/2-5"},"next":{"title":"Develop GStreamer Plugins","permalink":"/zb/docs/week3/3-1"}}');var i=a(4848),r=a(8453);const l={title:"2-6 Create Yocto Layer and Recipe",sidebar_position:6},o=void 0,d={},c=[{value:"Introduction",id:"introduction",level:3},{value:"Step 1: Create a New Layer",id:"step-1-create-a-new-layer",level:3},{value:"Step 2: Add a &quot;Hello World&quot; Program",id:"step-2-add-a-hello-world-program",level:3},{value:"Step 3: Edit <code>bblayers.conf</code> and <code>local.conf</code> files",id:"step-3-edit-bblayersconf-and-localconf-files",level:3},{value:"Step 4: Rebuild Image",id:"step-4-rebuild-image",level:3}];function s(e){const n={code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-create-a-new-layer",children:"Step 1: Create a New Layer"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.code,{children:"home/yocto/ZByocto"})," directory, create a layer named ",(0,i.jsx)(n.code,{children:"meta-zb"})," using the command below"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source poky/oe-init-build-env\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bitbake-layers create-layer meta-zb\n"})}),"\n",(0,i.jsxs)(n.p,{children:["A folder named ",(0,i.jsx)(n.code,{children:"meta-zb"})," is created, the structure is"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:".\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 layer.conf\n\u251c\u2500\u2500 COPYING.MIT\n\u251c\u2500\u2500 README\n\u2514\u2500\u2500 recipes-example\n    \u2514\u2500\u2500 example\n        \u2514\u2500\u2500 example_0.1.bb\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-add-a-hello-world-program",children:'Step 2: Add a "Hello World" Program'}),"\n",(0,i.jsxs)(n.p,{children:["Remove the ",(0,i.jsx)(n.code,{children:"example"})," file in ",(0,i.jsx)(n.code,{children:"recipes-example"}),", create a folder named ",(0,i.jsx)(n.code,{children:"hello"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Create a structure according to below"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"hello\n\u251c\u2500\u2500 files\n\u2502   \u2514\u2500\u2500 hello.c\n\u2514\u2500\u2500 hello.bb\n"})}),"\n",(0,i.jsx)(n.p,{children:"Paste the program into"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="hello.c"',children:'# include <stdio.h>\n\nint main(void) {\n   printf("Hello, World!\\n");\n   return 0;\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="hello.bb"',children:'DESCRIPTION = "Simple Hello World application"\n\nLICENSE = "MIT"\n\nLIC_FILES_CHKSUM = "file://${COREBASE}/meta/COPYING.MIT;md5=3da9cfbcb788c80a0384361b4de20420"\n\nSRC_URI = "file://hello.c"\n\nS = "${WORKDIR}/build"\n\ndo_compile() {\n    ${CC} ${CFLAGS} ${LDFLAGS} ${WORKDIR}/hello.c -o ${S}/hello\n}\n\ndo_install() {\n    install -d ${D}${bindir}\n    install -m 0755 ${S}/hello ${D}${bindir}/\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"step-3-edit-bblayersconf-and-localconf-files",children:["Step 3: Edit ",(0,i.jsx)(n.code,{children:"bblayers.conf"})," and ",(0,i.jsx)(n.code,{children:"local.conf"})," files"]}),"\n",(0,i.jsx)(n.p,{children:"Add the lines"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="bblayers.conf"',children:'BBLAYERS ?= " \\\n  ${TOPDIR}/../meta-zb \\\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="local.conf"',children:'IMAGE_INSTALL:append = " hello "\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-rebuild-image",children:"Step 4: Rebuild Image"}),"\n",(0,i.jsxs)(n.p,{children:["Initialise the build in the ",(0,i.jsx)(n.code,{children:"/home/yocto/ZByocto"})," directory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source poky/oe-init-build-env build\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"MACHINE=smarc-rzg2l bitbake core-image-qt\n"})}),"\n",(0,i.jsx)(n.p,{children:"After finished image build, flash the image into SD card and insert it in RZ/G2L board. Open the serial monitor and login."}),"\n",(0,i.jsxs)(n.p,{children:["When you type ",(0,i.jsx)(n.code,{children:"hello"}),", it will show ",(0,i.jsx)(n.code,{children:"Hello, world!"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:a(1345).A+"",width:"253",height:"47"})})]})}function A(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},1345:(e,n,a)=>{a.d(n,{A:()=>t});const t="data:image/jpeg;base64,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"},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>o});var t=a(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);