"use strict";(globalThis.webpackChunkmy_tutorial=globalThis.webpackChunkmy_tutorial||[]).push([[5333],{3444:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"other-tutorial/o1-5","title":"\ud83c\udd7e\ufe0f5\ufe0f\u20e3 USB devices sharing locally within Windows and Linux OS","description":"Step 1: Install USB/IP Tools","source":"@site/docs/other-tutorial/o1-5.md","sourceDirName":"other-tutorial","slug":"/other-tutorial/o1-5","permalink":"/zb/docs/other-tutorial/o1-5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/other-tutorial/o1-5.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"\ud83c\udd7e\ufe0f5\ufe0f\u20e3 USB devices sharing locally within Windows and Linux OS","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"\ud83c\udd7e\ufe0f4\ufe0f\u20e3 Image Build for RZ/V2H Development Board","permalink":"/zb/docs/other-tutorial/o1-4"},"next":{"title":"\ud83c\udd7e\ufe0f6\ufe0f\u20e3 Boot Raspberry Pi CM5 from eMMC storage","permalink":"/zb/docs/other-tutorial/o1-6"}}');var t=s(4848),o=s(8453);const l={title:"\ud83c\udd7e\ufe0f5\ufe0f\u20e3 USB devices sharing locally within Windows and Linux OS",sidebar_position:5},d=void 0,a={},r=[{value:"Step 1: Install USB/IP Tools",id:"step-1-install-usbip-tools",level:2},{value:"Step 2: Check &amp; Bind the USB Device (on Windows Host)",id:"step-2-check--bind-the-usb-device-on-windows-host",level:2},{value:"Step 3: Attach the USB Device (on Linux Client)",id:"step-3-attach-the-usb-device-on-linux-client",level:2},{value:"Step 4: Transfer files to the USB device",id:"step-4-transfer-files-to-the-usb-device",level:2}];function c(e){const n={admonition:"admonition",br:"br",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"step-1-install-usbip-tools",children:"Step 1: Install USB/IP Tools"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"On Windows \ud83e\ude9f"}),"(Host) :"]}),"\n",(0,t.jsxs)(n.p,{children:["Open ",(0,t.jsx)(n.strong,{children:"Command Prompt"})," as Administrator, run the following command to install ",(0,t.jsx)(n.code,{children:"usbipd"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"winget install usbipd\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"On Linux \ud83d\udc27"}),"(Client) :"]}),"\n",(0,t.jsxs)(n.p,{children:["Open a terminal, install ",(0,t.jsx)(n.code,{children:"usbip"})," and required kernel module using:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install usbip\nsudo modprobe vhci-hcd\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["\u2705 usbipd allows sharing USB devices from Windows.",(0,t.jsx)(n.br,{}),"\n","\u2705 usbip and vhci-hcd let Linux receive and use those devices."]})}),"\n",(0,t.jsx)(n.h2,{id:"step-2-check--bind-the-usb-device-on-windows-host",children:"Step 2: Check & Bind the USB Device (on Windows Host)"}),"\n",(0,t.jsx)(n.p,{children:"List all connected USB devices"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"usbipd list\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"BUSID  VID:PID    DEVICE\n1-3    0951:1666  Kingston USB Device\n"})}),"\n",(0,t.jsx)(n.p,{children:"Bind the USB device"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"usbipd bind --busid=1-3\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-3-attach-the-usb-device-on-linux-client",children:"Step 3: Attach the USB Device (on Linux Client)"}),"\n",(0,t.jsx)(n.p,{children:"list the available shared devices from the host"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo usbip list -r <HOST_IP>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"Exportable USB devices\n - 1-3: Kingston USB Device [0951:1666]\n"})}),"\n",(0,t.jsx)(n.p,{children:"Attach the shared device to the Linux system"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo usbip attach -r <HOST_IP> -b 1-3\n"})}),"\n",(0,t.jsx)(n.p,{children:"After attaching, the device will appear as a local USB device."}),"\n",(0,t.jsx)(n.h2,{id:"step-4-transfer-files-to-the-usb-device",children:"Step 4: Transfer files to the USB device"}),"\n",(0,t.jsx)(n.p,{children:"Check if the USB device is detected"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"lsblk\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see a new device"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"/dev/sda"})," or ",(0,t.jsx)(n.code,{children:"/dev/sdb"})]}),"\n",(0,t.jsx)(n.p,{children:"Write an image file to USB devices"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo bmaptool copy yourimage.bmap /dev/sdb\n"})}),"\n",(0,t.jsx)(n.p,{children:"You\u2019ve successfully shared a USB device from your Windows host to your Linux VM using USB/IP and usbipd-win!"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const t={},o=i.createContext(t);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);